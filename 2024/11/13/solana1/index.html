<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>solana 学习笔记一 Solana基础与环境搭建 | canzhu&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="一.区块链知识基础1.先看看区块链的定义区块链是由一系列按时间顺序链接的”区块”组成的。每个区块包含三部分: a.区块头(Block Header)前一个区块的哈希(Previous Block Hash):链接到链上前一个区区块的加密哈希值,确保数据不可篡改。 时间戳(Timestamp)记录创建区块的时间。 默克尔根(MerkleRoot):所有交易数据的哈希值,确保数据完整性。 b.区块体(">
<meta property="og:type" content="article">
<meta property="og:title" content="solana 学习笔记一 Solana基础与环境搭建">
<meta property="og:url" content="https://liucanzhu.github.io/2024/11/13/solana1/index.html">
<meta property="og:site_name" content="canzhu&#39;s blog">
<meta property="og:description" content="一.区块链知识基础1.先看看区块链的定义区块链是由一系列按时间顺序链接的”区块”组成的。每个区块包含三部分: a.区块头(Block Header)前一个区块的哈希(Previous Block Hash):链接到链上前一个区区块的加密哈希值,确保数据不可篡改。 时间戳(Timestamp)记录创建区块的时间。 默克尔根(MerkleRoot):所有交易数据的哈希值,确保数据完整性。 b.区块体(">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://liucanzhu.github.io/assets/img/26-1.jpg">
<meta property="og:image" content="https://liucanzhu.github.io/assets/img/26-2.jpg">
<meta property="og:image" content="https://liucanzhu.github.io/assets/img/26-3.jpg">
<meta property="article:published_time" content="2024-11-13T15:14:02.254Z">
<meta property="article:modified_time" content="2024-11-14T12:04:51.152Z">
<meta property="article:author" content="Liu Canzhu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://liucanzhu.github.io/assets/img/26-1.jpg">
  
    <link rel="alternate" href="/atom.xml" title="canzhu's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">canzhu&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://liucanzhu.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-solana1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/11/13/solana1/" class="article-date">
  <time class="dt-published" datetime="2024-11-13T15:14:02.254Z" itemprop="datePublished">2024-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      solana 学习笔记一 Solana基础与环境搭建
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="一-区块链知识基础"><a href="#一-区块链知识基础" class="headerlink" title="一.区块链知识基础"></a>一.区块链知识基础</h3><h4 id="1-先看看区块链的定义"><a href="#1-先看看区块链的定义" class="headerlink" title="1.先看看区块链的定义"></a>1.先看看区块链的定义</h4><p>区块链是由一系列按时间顺序链接的”区块”组成的。每个区块包含三部分:</p>
<h5 id="a-区块头-Block-Header"><a href="#a-区块头-Block-Header" class="headerlink" title="a.区块头(Block Header)"></a>a.区块头(Block Header)</h5><p>前一个区块的哈希(Previous Block Hash):链接到链上前一个区区块的加密哈希值,确保数据不可篡改。</p>
<p>时间戳(Timestamp)记录创建区块的时间。</p>
<p>默克尔根(MerkleRoot):所有交易数据的哈希值,确保数据完整性。</p>
<h5 id="b-区块体-Block-Body"><a href="#b-区块体-Block-Body" class="headerlink" title="b.区块体(Block Body)"></a>b.区块体(Block Body)</h5><p>交易列表(Transactions):包含区块中所有的交易记录。</p>
<p>区块哈希(Block Hash):</p>
<p>当前区块的哈希值:通过对区块头数据进行哈希计算生成,作为下一个区块的”前一个区块哈希”。通过这些信息可以将多个区块连接成一条链表</p>
<p>结构如下所示：</p>
<p><img src="/../assets/img/26-1.jpg" alt="图26-1" title="26-1"></p>
<p>众所周知区块链的特性就是去中心化，那么是如何去中心化的存储数据的呢：</p>
<h4 id="2-去中心化网络-P2P"><a href="#2-去中心化网络-P2P" class="headerlink" title="2.去中心化网络(P2P)"></a>2.去中心化网络(P2P)</h4><p>区块链是由分布在全球的节点组成的去中心化网络,这些节点共同维护和更新区块链状态。每个节点都有一份完整的区块链副本。</p>
<p>区块链上的交易包含以下基础步骤：</p>
<p>a.交易创建:用户A创建一笔交易,将资金或数据发送给用户B。</p>
<p>b.交易广播:该交易被广播到区块链网络中,所有节点接收到交易信息。</p>
<p>c.交易验证:网络中的矿工或验证节点对交易进行验证,确保交易的合法性</p>
<p>d.交易打包:验证通过的交易被打包进区块中,并由矿工竞争挖矿（在Pow的情况下）</p>
<p>e.交易确认:新创建的区块被添加到区块链上,交易得到确认···</p>
<p>如下所示：</p>
<p><img src="/../assets/img/26-2.jpg" alt="图26-2" title="26-2"></p>
<p>在上面的流程中，最重要的一步就是交易验证，在去中心化的交易中，没有一个存储数据的中心数据库，所以不同的节点达成共识非常重要</p>
<h4 id="3-共识机制"><a href="#3-共识机制" class="headerlink" title="3.共识机制"></a>3.共识机制</h4><p>共识机制是区块链网络中所有节点就数据达成一致的方式。以常见的工作量证明(Proof of Work,PoW)为例:</p>
<p>工作量证明(PoW):矿工通过计算工作量来解决一个复杂的数学问题（寻找符合条件的hash）,第一个解出问题的矿工可以将其区块添加到区块链中。</p>
<p>这些交易的逻辑来源于部署在区块链上的智能合约：</p>
<h4 id="4-智能合约"><a href="#4-智能合约" class="headerlink" title="4.智能合约"></a>4.智能合约</h4><p>智能合约是部署在区块链上的自执行代码,能根据预定条件自动执行交易</p>
<p>如下所示：</p>
<p><img src="/../assets/img/26-3.jpg" alt="图26-3" title="26-3"></p>
<p>那么和其他的链相比，Solana有什么优势呢</p>
<h4 id="5-Solana八大特性："><a href="#5-Solana八大特性：" class="headerlink" title="5.Solana八大特性："></a>5.Solana八大特性：</h4><p>高性能solana</p>
<ol>
<li><p>Proof of History(POH)-a clock before consensus;</p>
</li>
<li><p>Tower BFT-a PoH-optimized version of PBFT;</p>
</li>
<li><p>Turbine-a block propagation protocol;</p>
</li>
<li><p>Gulf Stream-Mempool-less transaction forwarding protocol:</p>
</li>
<li><p>Sealevel–Parallel smart contracts run-time;</p>
</li>
<li><p>Pipelining-a Transaction Processing Unit for validation optimization</p>
</li>
<li><p>Cloudbreak-Horizontally-Scaled Accounts Database; and</p>
</li>
<li><p>Archivers-Distributed ledger store</p>
</li>
</ol>
<h4 id="二-开发环境搭建"><a href="#二-开发环境搭建" class="headerlink" title="二.开发环境搭建"></a>二.开发环境搭建</h4><p>关于solana本地开发环境的一切配置，参考<a target="_blank" rel="noopener" href="https://solana.com/zh/docs/intro/installation%EF%BC%8C%E9%9D%9E%E5%B8%B8%E8%AF%A6%E7%BB%86">https://solana.com/zh/docs/intro/installation，非常详细</a></p>
<p>一切准备就绪之后，可以尝试在测试网络上领取一些代币：</p>
<p>但是我目前总是会报错：<code>error: error sending request for url (https://api.devnet.solana.com/): operation timed out</code></p>
<p>所以直接访问了solana的水龙头网站领取：<a target="_blank" rel="noopener" href="https://faucet.solana.com/">https://faucet.solana.com/</a></p>
<p>然后在solana 浏览器上查看账户信息和交易记录（记得切换到测试网devnet）</p>
<p>此时我们可以看到网络选项中有一个叫custom RPC url 的选项，但是直接点击, 暂时无法切换到这个网络，Solana CLI 内置了测试验证器。运行本地验证器将允许您在本地部署和测试您的程序。</p>
<p>在单独的终端中，运行以下命令来启动本地验证器：<code>solana-test-validator</code>，之后再solana浏览器切换到custom rps url就可以看到网络变成localhost:8899</p>
<p>此时我们可以在本地终端进行测试代币的获取和转移，这是我在本地测试网通过<code>solana airdrop number</code>获取测试代币后，通过<code>solana transfer &lt;recipient_public_key&gt; &lt;amount&gt; --from&lt;sender_keypair_path&gt;</code>(<sender_keypair_path>表示你本地存储密钥对信息的id.json文件路径，可以通过ls ~&#x2F;.config&#x2F;solana&#x2F;id.json 获取)<br>进行的一笔交易:</p>
<p><a target="_blank" rel="noopener" href="https://explorer.solana.com/tx/4vFFbCAq4PCjXJH6oDdrBCfBDzRcpZhnZmWjjyvhfDx9pVMthNkqfUqAJhnBkvfph7KQhgatw44N5YMVYRHFMgzX?cluster=custom&customUrl=http://localhost:8899">https://explorer.solana.com/tx/4vFFbCAq4PCjXJH6oDdrBCfBDzRcpZhnZmWjjyvhfDx9pVMthNkqfUqAJhnBkvfph7KQhgatw44N5YMVYRHFMgzX?cluster=custom&amp;customUrl=http%3A%2F%2Flocalhost%3A8899</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://liucanzhu.github.io/2024/11/13/solana1/" data-id="cm3g0xx6x0000e4uy0283dv0t" data-title="solana 学习笔记一 Solana基础与环境搭建" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/11/17/solana2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          solana 学习笔记二 Solana开发入门
        
      </div>
    </a>
  
  
    <a href="/2024/11/09/rust25/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">rust 学习笔记二十五 Rust中的共享内存</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/11/21/solana3/">solana 学习笔记三 Solana基础，账户与简单交互</a>
          </li>
        
          <li>
            <a href="/2024/11/17/solana2/">solana 学习笔记二 Solana开发入门</a>
          </li>
        
          <li>
            <a href="/2024/11/13/solana1/">solana 学习笔记一 Solana基础与环境搭建</a>
          </li>
        
          <li>
            <a href="/2024/11/09/rust25/">rust 学习笔记二十五 Rust中的共享内存</a>
          </li>
        
          <li>
            <a href="/2024/11/03/rust24/">rust 学习笔记二十四 Rust的并发</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Liu Canzhu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>